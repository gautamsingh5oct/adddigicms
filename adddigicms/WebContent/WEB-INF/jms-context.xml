<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xmlns:p="http://www.springframework.org/schema/p" 
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:jms="http://www.springframework.org/schema/jms"
	xsi:schemaLocation="
       http://www.springframework.org/schema/beans      http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
       http://www.springframework.org/schema/context    http://www.springframework.org/schema/context/spring-context-3.2.xsd
       http://www.springframework.org/schema/jms        http://www.springframework.org/schema/jms/spring-jms-3.0.xsd
       http://activemq.apache.org/schema/core http://activemq.apache.org/schema/core/activemq-core.xsd
           ">	
	
	<bean id="adnetworkTokenJMSTemplate" class="org.springframework.jms.core.JmsTemplate">
		<constructor-arg name="connectionFactory" ref="cachedConnectionFactory" />
		<property name="defaultDestinationName" value="mz/adnetworkTokenQueue" />
		<qualifier value="adnetworkTokenJMSTemplate"/>
	</bean>

   <bean id="adnetworkTokenDestination" class="org.apache.activemq.command.ActiveMQQueue">
		<constructor-arg index="0" value="mz/adnetworkTokenQueue?consumer.prefetchSize=300" />
	</bean>
	
	
	<bean id="objectSaveJMSTemplate" class="org.springframework.jms.core.JmsTemplate">
		<constructor-arg name="connectionFactory" ref="cachedConnectionFactory" />
		<property name="defaultDestinationName" value="mz/objectSaveQueue" />
		<qualifier value="objectSaveJMSTemplate"/>
	   </bean>
	   
	   <bean id="objectSaveDestination" class="org.apache.activemq.command.ActiveMQQueue">
		<constructor-arg index="0" value="mz/objectSaveQueue?consumer.prefetchSize=10" />
      </bean>
    <bean id="objectSaveListener" class="net.common.jms.JMSObjectSaveListener"/>	
	
	
	<!-- BSNL North EAST -->
	<bean id="bsnlNorthEastChargingJMSTemplate" class="org.springframework.jms.core.JmsTemplate">
		<constructor-arg name="connectionFactory" ref="cachedConnectionFactory" />
		<property name="defaultDestinationName" value="mz/bsnlNorthEastChargingCallbackQueue" />
		<qualifier value="bsnlNorthEastChargingJMSTemplate"/>
	   </bean>
	   
	   <bean id="bsnlNorthEastChargingDestination" class="org.apache.activemq.command.ActiveMQQueue">
		<constructor-arg index="0" value="mz/bsnlNorthEastChargingCallbackQueue?consumer.prefetchSize=10" />
      </bean>
    <bean id="jmsBSNLNorthEastChargingCallbackListener" class="net.bsnl.north.east.JMSBSNLNorthEastChargingCallbackListener"/>	
	<!-- BSNL North EAST -->
	<!--  BSNL SOUTH WEST -->
	 <bean id="bsnlSouthWestChargingJMSTemplate" class="org.springframework.jms.core.JmsTemplate">
		<constructor-arg name="connectionFactory" ref="cachedConnectionFactory" />
		<property name="defaultDestinationName" value="mz/bsnlSouthWestChargingCallbackQueue" />
		<qualifier value="bsnlSouthWestChargingJMSTemplate"/>
	   </bean>
	   
	   <bean id="bsnlSouthWestChargingDestination" class="org.apache.activemq.command.ActiveMQQueue">
		<constructor-arg index="0" value="mz/bsnlSouthWestChargingCallbackQueue?consumer.prefetchSize=10" />
      </bean>
    <bean id="jmsBSNLSouthWestChargingCallbackListener" class="net.bsnl.south.west.JMSBSNLSouthWestChargingCallbackListener"/>	
	
	<!--  BSNL SOUTH WEST -->
	
	
	<!-- airtel  charging jms template starting -->
	<bean id="airtelChargingCallbackJMSTemplate" class="org.springframework.jms.core.JmsTemplate">
		<constructor-arg name="connectionFactory" ref="cachedConnectionFactory" />
		<property name="defaultDestinationName" value="mz/airtelChargingCallbackQueue" />
		<qualifier value="airtelChargingCallbackJMSTemplate"/>
	</bean>
	<bean id="airtelChargingCallbackDestination" class="org.apache.activemq.command.ActiveMQQueue">
		<constructor-arg index="0" value="mz/airtelChargingCallbackQueue?consumer.prefetchSize=10" />
	</bean>
	
	
		
	<!--airtel charging jms template ending-->
	
	
	
	<!-- airtel  cg jms template starting -->
	<bean id="airtelCgCallbackJMSTemplate" class="org.springframework.jms.core.JmsTemplate">
		<constructor-arg name="connectionFactory" ref="cachedConnectionFactory" />
		<property name="defaultDestinationName" value="mz/airtelCgCallbackQueue" />
		<qualifier value="airtelCgCallbackJMSTemplate"/>
	</bean>
	
	<bean id="airtelCgCallbackDestination" class="org.apache.activemq.command.ActiveMQQueue">
		<constructor-arg index="0" value="mz/airtelCgCallbackQueue?consumer.prefetchSize=10" />
	</bean>
	
	
		
	<!--airtel cg jms template ending-->
	
	 <!-- vodafone charging jms template starting -->
 <bean id="vodaChargingCallbackJMSTemplate" class="org.springframework.jms.core.JmsTemplate">
  <constructor-arg name="connectionFactory" ref="cachedConnectionFactory" />
  <property name="defaultDestinationName" value="mz/vodaChargingCallbackQueue" />
  <qualifier value="vodaChargingCallbackJMSTemplate"/>
 </bean>

   <bean id="vodaChargingCallbackDestination" class="org.apache.activemq.command.ActiveMQQueue">
  <constructor-arg index="0" value="mz/vodaChargingCallbackQueue?consumer.prefetchSize=10" />
 </bean>
 
 
 
 
 <bean id="vodaRenewalChargingCallbackJMSTemplate" class="org.springframework.jms.core.JmsTemplate">
  <constructor-arg name="connectionFactory" ref="cachedConnectionFactory" />
  <property name="defaultDestinationName" value="mz/vodaRenewalChargingCallbackQueue" />
  <qualifier value="vodaRenewalChargingCallbackJMSTemplate"/>
  
 </bean>
   <bean id="renewalChargingCallbackDestination" class="org.apache.activemq.command.ActiveMQQueue">
  <constructor-arg index="0" value="mz/vodaRenewalChargingCallbackQueue?consumer.prefetchSize=5" />
 </bean>
 
	
	
	<bean id="connectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory"
		p:brokerURL="${acmq.brokerurl}"  p:useAsyncSend="true"  />

	<bean id="cachedConnectionFactory"
		class="org.springframework.jms.connection.CachingConnectionFactory"
		p:targetConnectionFactory-ref="connectionFactory"  p:sessionCacheSize="700" />

	<bean id="adnetworkTokenListenerListener" class="net.common.service.JMSAdnetworkTokenListener"/>
	 <bean id="airtelChargingCallBackListener" class="net.airtel.jms.service.JMSAirtelChargingCallBackListener"/>
    <bean id="airtelCgCallBackListener" class="net.airtel.jms.service.JMSAirtelCgCallBackListener"/>
	
	<bean id="ideaChargingCallbackJMSTemplate" class="org.springframework.jms.core.JmsTemplate">
  <constructor-arg name="connectionFactory" ref="cachedConnectionFactory" />
  <property name="defaultDestinationName" value="mz/ideaChargingCallbackQueue" />
  <qualifier value="ideaChargingCallbackJMSTemplate"/>
 </bean>
 <bean id="ideaChargingCallbackDestination" class="org.apache.activemq.command.ActiveMQQueue">
  <constructor-arg index="0" value="mz/ideaChargingCallbackQueue?consumer.prefetchSize=5" />
 </bean>
<bean id="ideaChargingCallBackListener" class="net.idea.JMSIdeaChargingCallBackListener"/>

<bean id="vodaChargingCallBackListener" class="net.voda.JMSVodaChargingCallBackListener"/>
<bean id="vodaRenewalChargingCallBackListener" class="net.voda.JMSVodaRenewalChargingCallbackListener"/>
    
	<jms:listener-container  container-type="default" 
	connection-factory="cachedConnectionFactory" 
	acknowledge="auto" concurrency="5-340" >
			<jms:listener destination="mz/adnetworkTokenQueue" 
			ref="adnetworkTokenListenerListener"
			method="onMessage"  />
				<jms:listener destination="mz/airtelChargingCallbackQueue"
				 ref="airtelChargingCallBackListener"
			method="onMessage"/>
			<jms:listener destination="mz/airtelCgCallbackQueue"
				 ref="airtelCgCallBackListener"
			method="onMessage"/>
			
			<jms:listener destination="mz/objectSaveQueue" 
			ref="objectSaveListener"
			method="onMessage"/>
			<jms:listener destination="mz/bsnlNorthEastChargingCallbackQueue" 
			ref="jmsBSNLNorthEastChargingCallbackListener"
			method="onMessage"/>
			
			<jms:listener destination="mz/bsnlSouthWestChargingCallbackQueue" 
			ref="jmsBSNLSouthWestChargingCallbackListener"
			method="onMessage"/>
			<jms:listener destination="mz/ideaChargingCallbackQueue"
     ref="ideaChargingCallBackListener"
   method="onMessage"/>
   
   <jms:listener destination="mz/vodaChargingCallbackQueue"
     ref="vodaChargingCallBackListener"
   method="onMessage"/>
   <jms:listener destination="mz/vodaRenewalChargingCallbackQueue"
     ref="vodaRenewalChargingCallBackListener"
   method="onMessage"/>
   
			
	</jms:listener-container>
	
<!-- 	<broker xmlns="http://activemq.apache.org/schema/core" -->
<!-- 	 brokerName="mz" dataDirectory="${activemq.data}" schedulerSupport="true" persistent="true"  -->
<!-- 	 splitSystemUsageForProducersConsumers="true" -->
<!-- 	  producerSystemUsagePortion="50" consumerSystemUsagePortion="50"> -->
<!--         <destinationPolicy> -->
<!--             <policyMap> -->
<!--               <policyEntries> -->
<!--                 <policyEntry queue="*" producerFlowControl="true" /> -->
<!--               </policyEntries> -->
<!--             </policyMap> -->
<!--         </destinationPolicy> -->
 
<!--         <managementContext> -->
<!--             <managementContext createConnector="false"/> -->
<!--         </managementContext>        -->
<!--         <persistenceAdapter> -->
<!--             <kahaDB directory="${activemq.data}/kahadb"  -->
<!--             ignoreMissingJournalfiles="true"  -->
<!--             checkForCorruptJournalFiles="true" -->
<!--               checksumJournalFiles="true"/> -->
           
<!--         </persistenceAdapter> -->
 
<!--           <systemUsage> -->
<!--             <systemUsage> -->
<!--                 <memoryUsage> -->
<!--                     <memoryUsage percentOfJvmHeap="5" /> -->
<!--                 </memoryUsage> -->
<!--                 <storeUsage> -->
<!--                     <storeUsage limit="2 gb"/> -->
<!--                 </storeUsage> -->
<!--                 <tempUsage> -->
<!--                     <tempUsage limit="1 gb"/> -->
<!--                 </tempUsage> -->
<!--             </systemUsage> -->
<!--         </systemUsage>         -->
<!--         <transportConnectors> -->
<!--             <transportConnector name="openwire" uri="${acmq.brokerurl.transport}"/> -->
<!--           </transportConnectors> -->
<!--         <shutdownHooks> -->
<!--             <bean xmlns="http://www.springframework.org/schema/beans"  -->
<!--             class="org.apache.activemq.hooks.SpringContextHook" /> -->
<!--         </shutdownHooks> -->
<!--     </broker>		 -->
</beans>
